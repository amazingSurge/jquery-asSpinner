/*! jquery asSpinner - v0.1.0 - 2014-04-10
* https://github.com/amazingSurge/jquery-asSpinner
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(e){var s=e.asSpinner=function(t,n){this.element=t,this.$element=e(t);var i=[];if(e.each(this.$element.data(),function(e,s){var t=RegExp("^asSpinner","i");t.test(e)&&(i[e.toLowerCase().replace(t,"")]=s)}),this.options=e.extend({},s.defaults,n,i),this.namespace=this.options.namespace,this.options.rule){var o=this,a=["min","max","step","precision"];e.each(a,function(e,t){o[t]=s.rules[o.options.rule][t]})}else this.min=this.options.min,this.max=this.options.max,this.step=this.options.step,this.precision=this.options.precision;this.isNumber(this.$element.val())&&(this.options.value=this.$element.val()),this.disabled=!1,this.value=this.options.value,this.eventBinded=!1,this.mousewheel=this.options.mousewheel,this.spinTimeout=null,this.isFocused=!1,this.classes={disabled:this.namespace+"_disabled",skin:this.namespace+"_"+this.options.skin,focus:this.namespace+"_focus",control:this.namespace+"-control",prev:this.namespace+"-prev",next:this.namespace+"-next",wrap:this.namespace+"-wrap"},this.init()};s.prototype={constructor:s,init:function(){this.$control=e('<div class="'+this.namespace+'-control"><span class="'+this.classes.prev+'"></span><span class="'+this.classes.next+'"></span></div>'),this.$wrap=this.$element.wrap('<div tabindex="0" class="'+this.classes.wrap+'"></div>').parent(),this.$prev=this.$control.find("."+this.classes.prev),this.$next=this.$control.find("."+this.classes.next),this.$element.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.$control.appendTo(this.$wrap),this.disabled===!1?this.bindEvent():this.$wrap.addClass(this.classes.disabled),this.set(this.value,this.options.format),this.$element.trigger("asSpinner::ready",this)},spin:function(e,s){var t=this,n=function(s){clearTimeout(t.spinTimeout),t.spinTimeout=setTimeout(function(){e.call(t),n(60)},s)};n(s||500)},_focus:function(){this.isFocused||this.$element.focus()},bindEvent:function(){var s=this;this.eventBinded=!0,this.$prev.on("mousedown.asSpinner",function(){return s._focus(),s.spin(s.prev),!1}).on("mouseup.asSpinner",function(){return clearTimeout(s.spinTimeout),s.prev.call(s),!1}),this.$next.on("mousedown.asSpinner",function(){return s._focus(),s.spin(s.next),!1}).on("mouseup.asSpinner",function(){return clearTimeout(s.spinTimeout),!1}).on("click.asSpinner",function(){return s.next.call(s),!1}),this.$element.on("focus.asSpinner",function(){var t=e.trim(s.$element.val());if("function"==typeof s.options.parse)t=s.options.parse(t);else{var n=t.match(/([0-9.]+)/);t=n[1]}return s._set(t),!1}).on("blur.asSpinner",function(){return s.set(s.value,s.options.format),!1}),this.$wrap.on("blur.asSpinner",function(){return s.set(s.value),s.$wrap.removeClass(s.classes.focus),!1}).on("click.asSpinner",function(){return s.$wrap.addClass(s.classes.focus),!1}),this.$element.on("focus.asSpinner",function(){s.isFocused=!0,e(this).on("keydown.asSpinner",function(e){var t=e.keyCode||e.which,n=this;return 38===t?(s.next.call(s),!1):40===t?(s.prev.call(s),!1):(57>=t&&t>=48&&setTimeout(function(){s.set(n.value)},0),void 0)}),s.mousewheel===!0&&e(this).mousewheel(function(e,t){t>0?s.next():s.prev(),e.preventDefault()})}).on("blur.asSpinner",function(){s.isFocused=!1,e(this).off("keydown.asSpinner"),s.$wrap.removeClass(s.classes.focus),s.mousewheel===!0&&s.$element.unmousewheel()})},unbindEvent:function(){this.eventBinded=!1,this.$element.off("focus.asSpinner").off("blur.asSpinner").off("keydown.asSpinner"),this.$prev.off("click.asSpinner").off("mousedown.asSpinner").off("mouseup.asSpinner"),this.$next.off("click.asSpinner").off("mousedown.asSpinner").off("mouseup.asSpinner"),this.$wrap.off("blur.asSpinner").off("click.asSpinner")},isNumber:function(s){return"number"==typeof s&&e.isNumeric(s)?!0:!1},isOutOfBounds:function(e){return this.min>e?-1:e>this.max?1:0},_set:function(e,s){var t=this.isOutOfBounds(e);0!==t&&(e=this.options.looping===!0?1===t?this.min:this.max:-1===t?this.min:this.max),this.value=e=Number(e).toFixed(this.precision),"function"==typeof s&&(e=s(e)),this.$element.val(e)},set:function(e,s){this._set(e,s),this.$element.trigger("asSpinner::change",this)},get:function(){return this.value},update:function(e){var s=this;["min","max","precision","step"].map(function(t){e[t]&&(s[t]=e[t])}),e.value&&this.set(e.value)},val:function(e){return e?(this.set(e),void 0):this.get()},prev:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseFloat(this.value)-parseFloat(this.step),this._set(this.value),this},next:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseFloat(this.value)+parseFloat(this.step),this._set(this.value),this},enable:function(){return this.disabled=!1,this.$wrap.addClass(this.classes.disabled),this.eventBinded===!1&&this.bindEvent(),this},disable:function(){return this.disabled=!0,this.$wrap.removeClass(this.classes.disabled),this.unbindEvent(),this},destroy:function(){this.unbindEvent()}},s.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:99999,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},s.defaults={namespace:"asSpinner",skin:null,value:0,min:-10,max:10,step:1,precision:0,rule:null,looping:!1,mousewheel:!1,format:null,parse:null},e.fn.asSpinner=function(t){if("string"==typeof t){var n=t,i=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var s=e.data(this,"asSpinner");"function"==typeof s[n]&&s[n].apply(s,i)})}return this.each(function(){e.data(this,"asSpinner")||e.data(this,"asSpinner",new s(this,t))})}})(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function s(s){var i,o=s||window.event,a=[].slice.call(arguments,1),r=0,u=0,l=0,h=0,p=0;return s=e.event.fix(o),s.type="mousewheel",o.wheelDelta&&(r=o.wheelDelta),o.detail&&(r=-1*o.detail),o.deltaY&&(l=-1*o.deltaY,r=l),o.deltaX&&(u=o.deltaX,r=-1*u),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=-1*o.wheelDeltaX),h=Math.abs(r),(!t||t>h)&&(t=h),p=Math.max(Math.abs(l),Math.abs(u)),(!n||n>p)&&(n=p),i=r>0?"floor":"ceil",r=Math[i](r/t),u=Math[i](u/n),l=Math[i](l/n),a.unshift(s,r,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}var t,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],s,!1);else this.onmousewheel=s},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],s,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});