/*! jquery asSpinner - v0.1.0 - 2014-05-16
* https://github.com/amazingSurge/jquery-asSpinner
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(e){var t=e.asSpinner=function(s,n){this.element=s,this.$element=e(s),this.name=this.$element.attr("name")?this.$element.attr("name"):n.name;var i=[];if(e.each(this.$element.data(),function(e,t){var s=RegExp("^asSpinner","i");s.test(e)&&(i[e.toLowerCase().replace(s,"")]=t)}),this.options=e.extend({},t.defaults,n,i),this.namespace=this.options.namespace,this.options.rule){var o=this,a=["min","max","step","precision"];e.each(a,function(e,s){o[s]=t.rules[o.options.rule][s]})}else this.min=this.options.min,this.max=this.options.max,this.step=this.options.step,this.precision=this.options.precision;this.isNumber(this.$element.val())&&(this.options.value=this.$element.val()),this.disabled=!1,this.value=this.options.value,this.eventBinded=!1,this.mousewheel=this.options.mousewheel,this.spinTimeout=null,this.isFocused=!1,this.classes={disabled:this.namespace+"_disabled",skin:this.namespace+"_"+this.options.skin,focus:this.namespace+"_focus",control:this.namespace+"-control",prev:this.namespace+"-prev",next:this.namespace+"-next",wrap:this.namespace+"-wrap"},this._trigger("init"),this.init()};t.prototype={constructor:t,init:function(){this.$control=e('<div class="'+this.namespace+'-control"><span class="'+this.classes.prev+'"></span><span class="'+this.classes.next+'"></span></div>'),this.$wrap=this.$element.wrap('<div tabindex="0" class="'+this.classes.wrap+'"></div>').parent(),this.$prev=this.$control.find("."+this.classes.prev),this.$next=this.$control.find("."+this.classes.next),this.$element.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.$control.appendTo(this.$wrap),this.disabled===!1?this.bindEvent():this.$wrap.addClass(this.classes.disabled),this.set(this.value,this.options.format),this._trigger("ready")},_trigger:function(e){this.$element.trigger("asSpinner::"+e,this),this.$element.trigger(e+".asSpinner",this),e=e.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});var t="on"+e,s=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;"function"==typeof this.options[t]&&this.options[t].apply(this,s)},spin:function(e,t){var s=this,n=function(t){clearTimeout(s.spinTimeout),s.spinTimeout=setTimeout(function(){e.call(s),n(60)},t)};n(t||500)},_focus:function(){this.isFocused||this.$element.focus()},bindEvent:function(){var t=this;this.eventBinded=!0,this.$prev.on("mousedown.asSpinner",function(){return t._focus(),t.spin(t.prev),!1}).on("mouseup.asSpinner",function(){return clearTimeout(t.spinTimeout),t.prev.call(t),!1}),this.$next.on("mousedown.asSpinner",function(){return t._focus(),t.spin(t.next),!1}).on("mouseup.asSpinner",function(){return clearTimeout(t.spinTimeout),!1}).on("click.asSpinner",function(){return t.next.call(t),!1}),this.$element.on("focus.asSpinner",function(){var s=e.trim(t.$element.val());return s="function"==typeof t.options.parse?t.options.parse(s):parseFloat(s),t._set(s),!1}).on("blur.asSpinner",function(){return t.set(t.value,t.options.format),!1}),this.$wrap.on("blur.asSpinner",function(){return t.set(t.value),t.$wrap.removeClass(t.classes.focus),!1}).on("click.asSpinner",function(){return t.$wrap.addClass(t.classes.focus),!1}),this.$element.on("focus.asSpinner",function(){t.isFocused=!0,e(this).on("keydown.asSpinner",function(e){var s=e.keyCode||e.which,n=this;return 38===s?(t.next.call(t),!1):40===s?(t.prev.call(t),!1):(57>=s&&s>=48&&setTimeout(function(){t.set(parseFloat(n.value))},0),void 0)}),t.mousewheel===!0&&e(this).mousewheel(function(e,s){s>0?t.next():t.prev(),e.preventDefault()})}).on("blur.asSpinner",function(){t.isFocused=!1,e(this).off("keydown.asSpinner"),t.$wrap.removeClass(t.classes.focus),t.mousewheel===!0&&t.$element.unmousewheel()})},unbindEvent:function(){this.eventBinded=!1,this.$element.off("focus.asSpinner").off("blur.asSpinner").off("keydown.asSpinner"),this.$prev.off("click.asSpinner").off("mousedown.asSpinner").off("mouseup.asSpinner"),this.$next.off("click.asSpinner").off("mousedown.asSpinner").off("mouseup.asSpinner"),this.$wrap.off("blur.asSpinner").off("click.asSpinner")},isNumber:function(t){return"number"==typeof t&&e.isNumeric(t)?!0:!1},isOutOfBounds:function(e){return this.min>e?-1:e>this.max?1:0},_set:function(e,t){isNaN(e)&&(e=this.min);var s=this.isOutOfBounds(e);0!==s&&(e=this.options.looping===!0?1===s?this.min:this.max:-1===s?this.min:this.max),this.value=e=Number(e).toFixed(this.precision),"function"==typeof t&&(e=t(e)),this.$element.val(e)},set:function(e,t){this._set(e,t),this._trigger("change")},get:function(){return this.value},update:function(e){var t=this;["min","max","precision","step"].map(function(s){e[s]&&(t[s]=e[s])}),e.value&&this.set(e.value)},val:function(e){return e?(this.set(e),void 0):this.get()},prev:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseFloat(this.value)-parseFloat(this.step),this._set(this.value),this},next:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseFloat(this.value)+parseFloat(this.step),this._set(this.value),this},enable:function(){return this.disabled=!1,this.$wrap.addClass(this.classes.disabled),this.eventBinded===!1&&this.bindEvent(),this},disable:function(){return this.disabled=!0,this.$wrap.removeClass(this.classes.disabled),this.unbindEvent(),this},destroy:function(){this.unbindEvent()}},t.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:99999,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},t.defaults={namespace:"asSpinner",skin:null,value:0,min:-10,max:10,step:1,name:null,precision:0,rule:null,looping:!1,mousewheel:!1,format:null,parse:null},e.fn.asSpinner=function(s){if("string"==typeof s){var n=s,i=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var t=e.data(this,"asSpinner");"function"==typeof t[n]&&t[n].apply(t,i)})}return this.each(function(){e.data(this,"asSpinner")||e.data(this,"asSpinner",new t(this,s))})}})(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i,o=t||window.event,a=[].slice.call(arguments,1),r=0,u=0,l=0,h=0,p=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(r=o.wheelDelta),o.detail&&(r=-1*o.detail),o.deltaY&&(l=-1*o.deltaY,r=l),o.deltaX&&(u=o.deltaX,r=-1*u),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=-1*o.wheelDeltaX),h=Math.abs(r),(!s||s>h)&&(s=h),p=Math.max(Math.abs(l),Math.abs(u)),(!n||n>p)&&(n=p),i=r>0?"floor":"ceil",r=Math[i](r/s),u=Math[i](u/n),l=Math[i](l/n),a.unshift(t,r,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}var s,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});