/*! jquery spiner - v0.1.0 - 2013-11-27
* https://github.com/amazingSurge/jquery-spiner
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(e){var t=e.spinner=function(s,n){this.element=s,this.$element=e(s),this.options=e.extend({},t.defaults,n),this.namespace=this.options.namespace,this.disabled=!1,this.step=this.options.step,this.value=this.options.value,this.eventBinded=!1,this.mousewheel=this.options.mousewheel,this.classes={disabled:this.namespace+"_disabled",skin:this.namespace+"_"+this.options.skin,focus:this.namespace+"_focus"},this.init()};t.prototype={constructor:t,init:function(){this.$control=e('<div class="'+this.namespace+'-control"><span class="'+this.namespace+'-prev"></span><span class="'+this.namespace+'-next"></span></div>'),this.$prev=this.$control.find("."+this.namespace+"-prev"),this.$next=this.$control.find("."+this.namespace+"-next"),this.$element.wrap('<div tabindex="0" class="'+this.namespace+'-wrap"></div>'),this.$wrap=this.$element.parent(),this.$element.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.$control.appendTo(this.$wrap),this.disabled===!1?this.bindEvent():this.$wrap.addClass(this.classes.disabled),this.set(this.value),this.$element.trigger("spinner::ready",this)},bindEvent:function(){var t=this;this.eventBinded=!0,this.$prev.on("mousedown.spinner",function(){return t.$element.focus(),t.prev.call(t),!1}),this.$next.on("mousedown.spinner",function(){return t.$element.focus(),t.next.call(t),!1}),this.$element.on("focus.spinner",function(){return t._set(t.value),!1}).on("blur.spinner",function(){var s=t.$element.val().replace(" ","");return e.isNumeric(s)===!1&&(s=t.value),"min"===t.isOutOfBounds(s)&&(s=t.options.min),"max"===t.isOutOfBounds(s)&&(s=t.options.max),t.set(s),!1}),this.$wrap.on("blur.spinner",function(){return t.set(t.value),t.$wrap.removeClass(t.classes.focus),!1}).on("click.spinner",function(){return t.$wrap.addClass(t.classes.focus),!1}),this.$element.on("focus.spinner",function(){t.$element.on("keydown",function(e){var s=e.keyCode||e.which;return 38===s?(t.next(),!1):40===s?(t.prev(),!1):void 0}),t.mousewheel===!0&&t.$element.mousewheel(function(e,s){s>0?t.next():t.prev()})}).on("blur.spinner",function(){t.$element.off("keydown.spinner"),t.$wrap.removeClass(t.classes.focus),t.mousewheel===!0&&t.$element.unmousewheel()})},unbindEvent:function(){this.eventBinded=!1,this.$element.off("focus"),this.$element.off("blur"),this.$element.off("keydown"),this.$prev.off("click"),this.$next.off("click"),this.$wrap.off("blur"),this.$wrap.off("click")},isNumber:function(t){return"number"==typeof t&&e.isNumeric(t)?!0:!1},isOutOfBounds:function(e){return this.options.min>e?"min":e>this.options.max?"max":!1},_set:function(e){this.value=e,this.$element.val(e)},set:function(e){this.value=e,"function"==typeof this.options.format&&(e=this.options.format(e)),this.$element.val(e),this.$element.trigger("spinner::change",this)},get:function(){return this.value},val:function(e){return e?(this.set(e),void 0):this.get()},prev:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseInt(this.value,10)-parseInt(this.step,10),"min"===this.isOutOfBounds(this.value)&&(this.value=this.options.looping===!0?this.options.max:this.options.min),this._set(this.value),this},next:function(){return e.isNumeric(this.value)||(this.value=0),this.value=parseInt(this.value,10)+parseInt(this.step,10),"max"===this.isOutOfBounds(this.value)&&(this.value=this.options.looping===!0?this.options.min:this.options.max),this._set(this.value),this},enable:function(){return this.disabled=!1,this.$wrap.addClass(this.classes.disabled),this.eventBinded===!1&&this.bindEvent(),this},disable:function(){return this.disabled=!0,this.$wrap.removeClass(this.classes.disabled),this.unbindEvent(),this},destroy:function(){this.unbindEvent()}},t.defaults={namespace:"spinner",skin:null,value:0,min:-10,max:10,step:1,looping:!0,mousewheel:!1,format:function(e){return e+" minutes"}},e.fn.spinner=function(s){if("string"==typeof s){var n=s,i=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var t=e.data(this,"spinner");"function"==typeof t[n]&&t[n].apply(t,i)})}return this.each(function(){e.data(this,"spinner")||e.data(this,"spinner",new t(this,s))})}})(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i,o=t||window.event,a=[].slice.call(arguments,1),h=0,l=0,u=0,r=0,c=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(h=o.wheelDelta),o.detail&&(h=-1*o.detail),o.deltaY&&(u=-1*o.deltaY,h=u),o.deltaX&&(l=o.deltaX,h=-1*l),void 0!==o.wheelDeltaY&&(u=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(l=-1*o.wheelDeltaX),r=Math.abs(h),(!s||s>r)&&(s=r),c=Math.max(Math.abs(u),Math.abs(l)),(!n||n>c)&&(n=c),i=h>0?"floor":"ceil",h=Math[i](h/s),l=Math[i](l/n),u=Math[i](u/n),a.unshift(t,h,l,u),(e.event.dispatch||e.event.handle).apply(this,a)}var s,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});